import{d as C,cN as x,p as L,a as T,c as a,cO as h,q as N,f as t,br as B}from"../assets/index.d4672ec7.js";import{M as v,T as M,N as y,L as O,H,a as p,b as F}from"./Logo-a26848d3.js";import{B as I,N as U,C as V}from"./Breadcrumb-79031cd0.js";import"./use-fullscreen-6e51dad9.js";import"./index-86430e32.js";import"./FormItem-46150d4d.js";import"./Grid-6148b6d2.js";import"./ReloadOutlined-3bf83094.js";import"./Avatar-7a3ec918.js";import"./Dropdown-4a04d132.js";import"./ChevronRight-0df093cd.js";import"./create-ref-setter-04566897.js";import"./use-deounce-6f71a867.js";var K=C({name:"MixinLayout",props:{nativeScrollbar:{type:Boolean,default:!0},menuOptions:{type:Array,default:()=>[]},tagsFixed:{type:Boolean,default:!0},collapsed:{type:Boolean,default:!0},inverted:{type:Boolean,default:!0},showTrigger:{type:[Boolean,String],default:!1},onScroll:{type:Function,default:void 0}},emits:["update:collapsed"],setup(s,{emit:o}){const n=x(),r=L(),d=T(!0),g=a(()=>["dark"].includes(r.navMode)),u=a(()=>r.isCutMenu),c=a(()=>{var e;return(e=n.matched.filter(l=>l.path)[0])==null?void 0:e.path}),f=a(()=>r.isShowTabs),w=a(()=>s.tagsFixed&&f.value?h.tagsHeight:0),m=a(()=>{const e=s.menuOptions.find(i=>i.path===c.value),l=((e==null?void 0:e.children)||[]).map(i=>({...i,icon:i.icon||(e==null?void 0:e.icon)}));return u.value?l:s.menuOptions});N(()=>n.fullPath,()=>{n.fullPath.startsWith("/redirect")||(d.value=m.value.length>0)},{immediate:!0});const b=a(()=>{const e={collapsed:s.collapsed,width:64},l={collapsed:!0,width:0};return u.value?d.value?e:l:e});function S(e){o("update:collapsed",e)}return{defaultInverted:g,isCutMenu:u,defaultValue:c,menuChildrensOptions:m,isShowSilder:d,state:b,onUpdateCollapsed:S,isShowTabs:f,contentTop:w}},render(){const s=t(v,{mode:"horizontal",value:this.defaultValue,collapsed:!1,inverted:this.defaultInverted,options:this.menuOptions,"children-field":"noChild"},null),o=this.isShowTabs?t(y,{class:"layout-tags",bordered:!0},{default:()=>[t(M,null,null)]}):null;return t(p,{class:"layout-wrapper layout-wrapper-mixin"},{default:()=>[t(y,{class:"layout-header",inverted:this.defaultInverted,bordered:!0},{default:()=>[t(O,{width:200,height:h.headerHeight},null),t(H,null,{left:()=>this.isCutMenu?s:t(I,null,null)})]}),t(p,{"has-sider":!0,position:"absolute",style:`top: ${h.headerHeight}px`},{default:()=>[t("div",{class:"layout-sider-wrapper"},[t(U,{class:"layout-sider",collapsed:this.state.collapsed,"collapse-mode":"width","collapsed-width":this.state.width,width:200,bordered:!0,inverted:this.inverted,"content-style":"height: 100%;","native-scrollbar":this.nativeScrollbar,"show-trigger":this.isShowSilder?this.showTrigger:!1,"onUpdate:collapsed":this.onUpdateCollapsed},{default:()=>[t(v,{inverted:this.inverted,options:this.menuChildrensOptions},null)]}),t(V,{class:"mixin-collapse",collapsed:this.state.collapsed,size:this.state.collapsed?24:22,width:200,border:this.inverted?"top":"top,right",inverted:this.inverted,"collapsed-width":this.state.width},null)]),t(p,{class:"n-layout-main"},{default:()=>[this.tagsFixed?o:null,t(F,{class:"layout-content",position:"absolute",style:`top: ${this.contentTop}px; bottom: 0`,"native-scrollbar":this.nativeScrollbar,onScroll:this.onScroll},{default:()=>[this.tagsFixed?null:o,B(this.$slots,"default")]})]})]})]})}});export{K as default};
